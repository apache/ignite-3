// Licensed to the Apache Software Foundation (ASF) under one or more
// contributor license agreements.  See the NOTICE file distributed with
// this work for additional information regarding copyright ownership.
// The ASF licenses this file to You under the Apache License, Version 2.0
// (the "License"); you may not use this file except in compliance with
// the License.  You may obtain a copy of the License at
//
// http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
= Available Events

This section lists events that are available in Apache Ignite 3.

== Connection Events

These events are fired every time a client connects to the cluster, or disconnects from it.

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======
|Event Type
|Description

|CLIENT_CONNECTION_ESTABLISHED
|Connection with the client established. Connection info contains information about the client.


|CLIENT_CONNECTION_CLOSED
|Connection with the client closed. Connection info contains information about the client.
|=======

== Authentication Events

These events are fired when the user performs an action that requires authentication.

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======
|Event Type
|Description

|USER_AUTHENTICATION_SUCCESS
|User was authenticated on the cluster.

|USER_AUTHENTICATION_FAILURE
|User failed to authenticate on the cluster. Get the username from the event's `identity` field.

|=======


== Authorization Events

These events are fired when the user performs an action that requires authentication. Each event body has a list of `privileges`, where every `privelege` is an object with the `action` and `selector`. For more details see link:administrators-guide/security/permissions[User Permissions and Roles] section.


[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======
|Event Type
|Description


|USER_AUTHORIZATION_SUCCESS
|An action was authorized for the user on a specific object.

|USER_AUTHORIZATION_FAILURE
|An action was denied to the user on a specific object.
|=======

== Query Events

These events are fired when the user performs a query.

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======
|Event Type
|Description


|QUERY_STARTED
|A new query was started.

|QUERY_FINISHED
|Query execution is finished.

|=======

=== Query Event Structure

Each query event has the following fields:

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======

|Field Name
|Description

|initiator
|Name of a node that initiated the query.

|id
|Query ID.

|schema
|Name of the schema that was used to resolve non-qualified object names.

|sql
|An original query string.

|parentId
|ID of the parent query, if any.

|statementNumber
|A 0-based index of query within the script, if applicable. Returns -1 otherwise.

|txId
|ID of the transaction, if known.

|startTime
|Time at which query appears on server. Applicable only to `QUERY_FINISHED` events.

|type
|*Optional* Type of the query, if known.

|error
|*Optional* An error, if one occurred during execution and caused the query to terminate.

|=======



== Compute Job Events

These events describe the possible states of a compute job.

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======

|Event Type
|Description

|COMPUTE_JOB_QUEUED,
|Triggered when a compute job is added to the execution queue.

|COMPUTE_JOB_EXECUTING,
|Triggered when a compute job starts execution.

|COMPUTE_JOB_FAILED,
|Triggered when a compute job fails and throws an exception during execution.

|COMPUTE_JOB_COMPLETED,
|Triggered when a compute job is finished successfully.

|COMPUTE_JOB_CANCELING,
|Triggered when a compute job cancellation is requested.

|COMPUTE_JOB_CANCELED,
|Triggered when a compute job has been canceled.

|=======

=== Compute Job Event Structure

Each compute job event has the following fields:

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======

|Field Name
|Description

|type
|Type of the compute job. Could be `SINGLE`, `BROADCAST`, `MAP_REDUCE` or `DATA_RECEIVER`.

Single job is the most common type, assigned to jobs that are executed on a single node. Broadcast jobs are executed on many nodes simultaneously. Map reduce jobs are the jobs that are submitted from the map reduce task. Data receiver is an internal compute job that is used when data streamer API is used.

|className
|Class name of a job.

|jobId
|Compute job ID.

|targetNode
|Name of the node where a job is executed.

|initiatorNode
|Name of the node where a submit request is processed.

|taskId
|*Optional* Ð¡ommon ID for all broadcast compute jobs submitted from a single invocation.

|tableName
|*Optional* Table name for colocated jobs or partitioned broadcast jobs.

|clientAddress
|*Optional* A socket address of a thin client that submitted a job.

|=======

== Map Reduce Task Events

These events describe the possible states of a map reduce task.

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======

|Event Type
|Description

|MAP_REDUCE_TASK_QUEUED
|Triggered when a map reduce task is added to the execution queue.

|MAP_REDUCE_TASK_EXECUTING,
|Triggered when a map reduce task starts execution.

|MAP_REDUCE_TASK_FAILED,
|Triggered when a map reduce task fails and throws an exception during execution.

|MAP_REDUCE_TASK_COMPLETED,
|Triggered when a map reduce task is finished successfully.

|MAP_REDUCE_TASK_CANCELED,
|Triggered when a map reduce task has been canceled.

|=======

=== Map Reduce Event Structure

Each task event has the following fields:

[width="100%", cols="30%,70%",opts="header", stripes=none]
|=======

|Field Name
|Description

|type
|Type of the task. Always is a `MAP_REDUCE` event type.

|className
|Class name of a task.

|taskId
|ID of a map reduce task.

|targetNode
|Name of the node where a task is executed.

|clientAddress
|*Optional* A socket address of a thin client that submitted a task.

|=======
